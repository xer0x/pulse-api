// ==========================================================================
// Project:   Pulse - mainPage
// Copyright: Â©2010 My Company, Inc.
// ==========================================================================
/*globals Pulse */

// This page describes the main user interface for your application.  
Pulse.mainPage = SC.Page.design({

  // The main pane is made visible on screen as soon as your app is loaded.
  // Add childViews to this pane for views to display immediately on page 
  // load.
  mainPane: SC.MainPane.design({
    childViews: 'topView middleView'.w(),
    
    topView: SC.ToolbarView.design({
      layout: { centerX: 0, centerY: 0, right: 0, height: 36 },
      childViews: 'labelView'.w(),
      anchorLocation: SC.ANCHOR_TOP,

      labelView: SC.LabelView.design({
      layout: { centerY: 0, height: 24, left: 8, width: 200 },
      controlSize: SC.LARGE_CONTROL_SIZE,
      fontWeight: SC.BOLD_WEIGHT,
      value: 'Pulse Buildings'
      })
    }),

    middleView: SC.SplitView.design({
      layout: { top: 36, right: 0, bottom:32, left: 0 }, //bottom:32 leaves room for a toolbar below
      autoresizeBehavior: SC.RESIZE_BOTTOM_RIGHT,
      // defaultThickness: 0.8,
      defaultThickness: 120,
      topLeftMinThickness: 100,
      topLeftMaxThickness: 200,

      topLeftView: SC.ScrollView.design({
        hasHorizontalScroller: NO,
    
        // left side's view contents
        contentView: SC.ListView.design({
          // data binding to controller
          contentBinding: 'Pulse.buildingsController.arrangedObjects',
          selectionBinding: 'Pulse.buildingsController.selection',
          contentValueKey: "name",
          rowHeight: 21,
          canEditContent: NO,
          canDeleteContent: NO,
          actOnSelect: YES, // single click, instead of double click
          target: "Pulse.buildingsController",
          action: "selectBuilding"
        })
      }),
    
      dividerView: SC.SplitDividerView.design({
        layout: {}
      }),
      
      bottomRightView: SC.SplitView.design({
        // right side's view contents
        autoresizeBehavior: SC.RESIZE_BOTTOM_RIGHT,
        // defaultThickness: 0.999,
        defaultThickness: 0.8,      // .8 is good if we put the graph at the bottom
        //  defaultThickness: 120,
    
        layoutDirection: SC.LAYOUT_VERTICAL,
    
        topLeftView: SC.StaticContentView.design({
          // top map view
          content: "<div id='map_canvas'></div>"
      
        }),
        bottomRightView: Flot.GraphView.design({
          // bottom stats view

          //  a chart/graph of energy readings from API here
          
          // TODO move the data into a fixture,
          // make that work here
          // replace the fixture up with Data-Store call to http://pulse.sluglab.com/data/points/ID
        
          layout: { left: 0, top: 0, height: 200, right: 0 } ,
          data: [
            //SC.Object.create({ label: 'Some building', data:[[0,5], [1, 3], [2, 4], [3,2], [4,4]] }) ,
            SC.Object.create(
              //{"id":25393,"label":"Frungy Centre Energy","unit":"kWh","start":"2010-10-09T03:00:00-04:00","end":"2010-10-16T04:00:00-04:00","sum":2358.74729167,"data":[["2010-10-09T03:00:00-04:00",12.1977083333],["2010-10-09T04:00:00-04:00",11.9627083333],["2010-10-09T05:00:00-04:00",11.8425],["2010-10-09T06:00:00-04:00",11.8881666667],["2010-10-09T07:00:00-04:00",11.9784166667],["2010-10-09T08:00:00-04:00",11.9935416667],["2010-10-09T09:00:00-04:00",13.0759583333],["2010-10-09T10:00:00-04:00",13.0596666667],["2010-10-09T11:00:00-04:00",13.184625],["2010-10-09T12:00:00-04:00",13.2589583333],["2010-10-09T13:00:00-04:00",13.1005833333],["2010-10-09T14:00:00-04:00",13.188125],["2010-10-09T15:00:00-04:00",13.2918333333],["2010-10-09T16:00:00-04:00",13.2060833333],["2010-10-09T17:00:00-04:00",12.9785],["2010-10-09T18:00:00-04:00",13.060625],["2010-10-09T19:00:00-04:00",13.018125],["2010-10-09T20:00:00-04:00",12.8721666667],["2010-10-09T21:00:00-04:00",12.8495],["2010-10-09T22:00:00-04:00",12.6154166667],["2010-10-09T23:00:00-04:00",12.5355416667],["2010-10-10T00:00:00-04:00",12.3688333333],["2010-10-10T01:00:00-04:00",11.6259583333],["2010-10-10T02:00:00-04:00",11.7060833333],["2010-10-10T03:00:00-04:00",11.7470833333],["2010-10-10T04:00:00-04:00",11.8529583333],["2010-10-10T05:00:00-04:00",11.6205],["2010-10-10T06:00:00-04:00",11.7981666667],["2010-10-10T07:00:00-04:00",11.737125],["2010-10-10T08:00:00-04:00",11.5592083333],["2010-10-10T09:00:00-04:00",12.5187916667],["2010-10-10T10:00:00-04:00",12.5154583333],["2010-10-10T11:00:00-04:00",12.2447916667],["2010-10-10T12:00:00-04:00",12.459375],["2010-10-10T13:00:00-04:00",12.698125],["2010-10-10T14:00:00-04:00",12.5027083333],["2010-10-10T15:00:00-04:00",12.406875],["2010-10-10T16:00:00-04:00",12.3915],["2010-10-10T17:00:00-04:00",12.5155],["2010-10-10T18:00:00-04:00",12.7263333333],["2010-10-10T19:00:00-04:00",12.3892916667],["2010-10-10T20:00:00-04:00",12.2365833333],["2010-10-10T21:00:00-04:00",12.0850833333],["2010-10-10T22:00:00-04:00",12.3126666667],["2010-10-10T23:00:00-04:00",12.1699583333],["2010-10-11T00:00:00-04:00",12.4753333333],["2010-10-11T01:00:00-04:00",11.982875],["2010-10-11T02:00:00-04:00",11.648],["2010-10-11T03:00:00-04:00",11.42825],["2010-10-11T04:00:00-04:00",11.5409583333],["2010-10-11T05:00:00-04:00",11.7231666667],["2010-10-11T06:00:00-04:00",11.853875],["2010-10-11T07:00:00-04:00",11.81625],["2010-10-11T08:00:00-04:00",11.5884583333],["2010-10-11T09:00:00-04:00",12.92075],["2010-10-11T10:00:00-04:00",12.78325],["2010-10-11T11:00:00-04:00",12.7525416667],["2010-10-11T12:00:00-04:00",13.0125],["2010-10-11T13:00:00-04:00",12.491625],["2010-10-11T14:00:00-04:00",12.666375],["2010-10-11T15:00:00-04:00",13.0671666667],["2010-10-11T16:00:00-04:00",12.9203333333],["2010-10-11T17:00:00-04:00",12.7585833333],["2010-10-11T18:00:00-04:00",12.70075],["2010-10-11T19:00:00-04:00",12.5237083333],["2010-10-11T20:00:00-04:00",12.4571666667],["2010-10-11T21:00:00-04:00",12.1880833333],["2010-10-11T22:00:00-04:00",12.3640416667],["2010-10-11T23:00:00-04:00",12.476125],["2010-10-12T00:00:00-04:00",12.4612916667],["2010-10-12T01:00:00-04:00",11.938875],["2010-10-12T02:00:00-04:00",11.5749166667],["2010-10-12T03:00:00-04:00",11.3002083333],["2010-10-12T04:00:00-04:00",11.3517083333],["2010-10-12T05:00:00-04:00",11.4384166667],["2010-10-12T06:00:00-04:00",11.4335833333],["2010-10-12T07:00:00-04:00",11.4507916667],["2010-10-12T08:00:00-04:00",12.11325],["2010-10-12T09:00:00-04:00",13.9578333333],["2010-10-12T10:00:00-04:00",15.153375],["2010-10-12T11:00:00-04:00",16.617875],["2010-10-12T12:00:00-04:00",18.243125],["2010-10-12T13:00:00-04:00",19.0785416667],["2010-10-12T14:00:00-04:00",19.1639583333],["2010-10-12T15:00:00-04:00",19.0277083333],["2010-10-12T16:00:00-04:00",18.8251666667],["2010-10-12T17:00:00-04:00",19.0352916667],["2010-10-12T18:00:00-04:00",18.1400833333],["2010-10-12T19:00:00-04:00",16.8557083333],["2010-10-12T20:00:00-04:00",15.3191666667],["2010-10-12T21:00:00-04:00",14.529],["2010-10-12T22:00:00-04:00",14.2920833333],["2010-10-12T23:00:00-04:00",13.8494166667],["2010-10-13T00:00:00-04:00",13.50575],["2010-10-13T01:00:00-04:00",12.585125],["2010-10-13T02:00:00-04:00",12.327625],["2010-10-13T03:00:00-04:00",12.3112916667],["2010-10-13T04:00:00-04:00",12.3503333333],["2010-10-13T05:00:00-04:00",12.20275],["2010-10-13T06:00:00-04:00",12.0722916667],["2010-10-13T07:00:00-04:00",12.164125],["2010-10-13T08:00:00-04:00",12.55625],["2010-10-13T09:00:00-04:00",14.0311666667],["2010-10-13T10:00:00-04:00",15.697875],["2010-10-13T11:00:00-04:00",17.62475],["2010-10-13T12:00:00-04:00",18.7925],["2010-10-13T13:00:00-04:00",19.0111666667],["2010-10-13T14:00:00-04:00",18.8875833333],["2010-10-13T15:00:00-04:00",19.4182916667],["2010-10-13T16:00:00-04:00",20.0315416667],["2010-10-13T17:00:00-04:00",19.9552916667],["2010-10-13T18:00:00-04:00",19.05],["2010-10-13T19:00:00-04:00",18.019625],["2010-10-13T20:00:00-04:00",16.196875],["2010-10-13T21:00:00-04:00",14.4688333333],["2010-10-13T22:00:00-04:00",14.314875],["2010-10-13T23:00:00-04:00",13.9841666667],["2010-10-14T00:00:00-04:00",13.748625],["2010-10-14T01:00:00-04:00",12.7385],["2010-10-14T02:00:00-04:00",12.58825],["2010-10-14T03:00:00-04:00",12.36325],["2010-10-14T04:00:00-04:00",12.3997916667],["2010-10-14T05:00:00-04:00",12.345],["2010-10-14T06:00:00-04:00",12.2266666667],["2010-10-14T07:00:00-04:00",12.214625],["2010-10-14T08:00:00-04:00",12.776],["2010-10-14T09:00:00-04:00",14.6601666667],["2010-10-14T10:00:00-04:00",16.4029166667],["2010-10-14T11:00:00-04:00",17.7005],["2010-10-14T12:00:00-04:00",18.5954583333],["2010-10-14T13:00:00-04:00",19.1269583333],["2010-10-14T14:00:00-04:00",18.765875],["2010-10-14T15:00:00-04:00",19.002625],["2010-10-14T16:00:00-04:00",18.9308333333],["2010-10-14T17:00:00-04:00",18.92075],["2010-10-14T18:00:00-04:00",18.1190416667],["2010-10-14T19:00:00-04:00",16.980625],["2010-10-14T20:00:00-04:00",15.4740833333],["2010-10-14T21:00:00-04:00",14.5332916667],["2010-10-14T22:00:00-04:00",14.4013333333],["2010-10-14T23:00:00-04:00",13.9370416667],["2010-10-15T00:00:00-04:00",13.5967083333],["2010-10-15T01:00:00-04:00",12.5614583333],["2010-10-15T02:00:00-04:00",12.6240416667],["2010-10-15T03:00:00-04:00",12.47525],["2010-10-15T04:00:00-04:00",12.2728333333],["2010-10-15T05:00:00-04:00",12.2962916667],["2010-10-15T06:00:00-04:00",12.4217083333],["2010-10-15T07:00:00-04:00",12.516125],["2010-10-15T08:00:00-04:00",12.6506666667],["2010-10-15T09:00:00-04:00",14.3772083333],["2010-10-15T10:00:00-04:00",16.0014166667],["2010-10-15T11:00:00-04:00",17.7475416667],["2010-10-15T12:00:00-04:00",18.7422916667],["2010-10-15T13:00:00-04:00",19.0165833333],["2010-10-15T14:00:00-04:00",19.0423333333],["2010-10-15T15:00:00-04:00",19.0916666667],["2010-10-15T16:00:00-04:00",18.8600833333],["2010-10-15T17:00:00-04:00",18.9618333333],["2010-10-15T18:00:00-04:00",17.9549166667],["2010-10-15T19:00:00-04:00",16.4060416667],["2010-10-15T20:00:00-04:00",15.0535416667],["2010-10-15T21:00:00-04:00",14.0393333333],["2010-10-15T22:00:00-04:00",13.8432916667],["2010-10-15T23:00:00-04:00",13.8481666667],["2010-10-16T00:00:00-04:00",13.6705],["2010-10-16T01:00:00-04:00",13.1182916667],["2010-10-16T02:00:00-04:00",12.405625],["2010-10-16T03:00:00-04:00",null]]}
              //{"id":25393,"label":"Frungy Centre Energy","unit":"kWh","start":1286611200,"end":1287219600,"sum":2346.54958333,"data":[[1286611200,11.9627083333],[1286614800,11.8425],[1286618400,11.8881666667],[1286622000,11.9784166667],[1286625600,11.9935416667],[1286629200,13.0759583333],[1286632800,13.0596666667],[1286636400,13.184625],[1286640000,13.2589583333],[1286643600,13.1005833333],[1286647200,13.188125],[1286650800,13.2918333333],[1286654400,13.2060833333],[1286658000,12.9785],[1286661600,13.060625],[1286665200,13.018125],[1286668800,12.8721666667],[1286672400,12.8495],[1286676000,12.6154166667],[1286679600,12.5355416667],[1286683200,12.3688333333],[1286686800,11.6259583333],[1286690400,11.7060833333],[1286694000,11.7470833333],[1286697600,11.8529583333],[1286701200,11.6205],[1286704800,11.7981666667],[1286708400,11.737125],[1286712000,11.5592083333],[1286715600,12.5187916667],[1286719200,12.5154583333],[1286722800,12.2447916667],[1286726400,12.459375],[1286730000,12.698125],[1286733600,12.5027083333],[1286737200,12.406875],[1286740800,12.3915],[1286744400,12.5155],[1286748000,12.7263333333],[1286751600,12.3892916667],[1286755200,12.2365833333],[1286758800,12.0850833333],[1286762400,12.3126666667],[1286766000,12.1699583333],[1286769600,12.4753333333],[1286773200,11.982875],[1286776800,11.648],[1286780400,11.42825],[1286784000,11.5409583333],[1286787600,11.7231666667],[1286791200,11.853875],[1286794800,11.81625],[1286798400,11.5884583333],[1286802000,12.92075],[1286805600,12.78325],[1286809200,12.7525416667],[1286812800,13.0125],[1286816400,12.491625],[1286820000,12.666375],[1286823600,13.0671666667],[1286827200,12.9203333333],[1286830800,12.7585833333],[1286834400,12.70075],[1286838000,12.5237083333],[1286841600,12.4571666667],[1286845200,12.1880833333],[1286848800,12.3640416667],[1286852400,12.476125],[1286856000,12.4612916667],[1286859600,11.938875],[1286863200,11.5749166667],[1286866800,11.3002083333],[1286870400,11.3517083333],[1286874000,11.4384166667],[1286877600,11.4335833333],[1286881200,11.4507916667],[1286884800,12.11325],[1286888400,13.9578333333],[1286892000,15.153375],[1286895600,16.617875],[1286899200,18.243125],[1286902800,19.0785416667],[1286906400,19.1639583333],[1286910000,19.0277083333],[1286913600,18.8251666667],[1286917200,19.0352916667],[1286920800,18.1400833333],[1286924400,16.8557083333],[1286928000,15.3191666667],[1286931600,14.529],[1286935200,14.2920833333],[1286938800,13.8494166667],[1286942400,13.50575],[1286946000,12.585125],[1286949600,12.327625],[1286953200,12.3112916667],[1286956800,12.3503333333],[1286960400,12.20275],[1286964000,12.0722916667],[1286967600,12.164125],[1286971200,12.55625],[1286974800,14.0311666667],[1286978400,15.697875],[1286982000,17.62475],[1286985600,18.7925],[1286989200,19.0111666667],[1286992800,18.8875833333],[1286996400,19.4182916667],[1287000000,20.0315416667],[1287003600,19.9552916667],[1287007200,19.05],[1287010800,18.019625],[1287014400,16.196875],[1287018000,14.4688333333],[1287021600,14.314875],[1287025200,13.9841666667],[1287028800,13.748625],[1287032400,12.7385],[1287036000,12.58825],[1287039600,12.36325],[1287043200,12.3997916667],[1287046800,12.345],[1287050400,12.2266666667],[1287054000,12.214625],[1287057600,12.776],[1287061200,14.6601666667],[1287064800,16.4029166667],[1287068400,17.7005],[1287072000,18.5954583333],[1287075600,19.1269583333],[1287079200,18.765875],[1287082800,19.002625],[1287086400,18.9308333333],[1287090000,18.92075],[1287093600,18.1190416667],[1287097200,16.980625],[1287100800,15.4740833333],[1287104400,14.5332916667],[1287108000,14.4013333333],[1287111600,13.9370416667],[1287115200,13.5967083333],[1287118800,12.5614583333],[1287122400,12.6240416667],[1287126000,12.47525],[1287129600,12.2728333333],[1287133200,12.2962916667],[1287136800,12.4217083333],[1287140400,12.516125],[1287144000,12.6506666667],[1287147600,14.3772083333],[1287151200,16.0014166667],[1287154800,17.7475416667],[1287158400,18.7422916667],[1287162000,19.0165833333],[1287165600,19.0423333333],[1287169200,19.0916666667],[1287172800,18.8600833333],[1287176400,18.9618333333],[1287180000,17.9549166667],[1287183600,16.4060416667],[1287187200,15.0535416667],[1287190800,14.0393333333],[1287194400,13.8432916667],[1287198000,13.8481666667],[1287201600,13.6705],[1287205200,13.1182916667],[1287208800,12.405625],[1287212400,null],[1287216000,null]]}
              {"id":25393,"label":"Frungy Centre Energy","unit":"kWh","start":1286611200,"end":1287219600,"sum":2346.54958333,"data":[[1286611200000,11.9627083333],[1286614800000,11.8425],[1286618400000,11.8881666667],[1286622000000,11.9784166667],[1286625600000,11.9935416667],[1286629200000,13.0759583333],[1286632800000,13.0596666667],[1286636400000,13.184625],[1286640000000,13.2589583333],[1286643600000,13.1005833333],[1286647200000,13.188125],[1286650800000,13.2918333333],[1286654400000,13.2060833333],[1286658000000,12.9785],[1286661600000,13.060625],[1286665200000,13.018125],[1286668800000,12.8721666667],[1286672400000,12.8495],[1286676000000,12.6154166667],[1286679600000,12.5355416667],[1286683200000,12.3688333333],[1286686800000,11.6259583333],[1286690400000,11.7060833333],[1286694000000,11.7470833333],[1286697600000,11.8529583333],[1286701200000,11.6205],[1286704800000,11.7981666667],[1286708400000,11.737125],[1286712000000,11.5592083333],[1286715600000,12.5187916667],[1286719200000,12.5154583333],[1286722800000,12.2447916667],[1286726400000,12.459375],[1286730000000,12.698125],[1286733600000,12.5027083333],[1286737200000,12.406875],[1286740800000,12.3915],[1286744400000,12.5155],[1286748000000,12.7263333333],[1286751600000,12.3892916667],[1286755200000,12.2365833333],[1286758800000,12.0850833333],[1286762400000,12.3126666667],[1286766000000,12.1699583333],[1286769600000,12.4753333333],[1286773200000,11.982875],[1286776800000,11.648],[1286780400000,11.42825],[1286784000000,11.5409583333],[1286787600000,11.7231666667],[1286791200000,11.853875],[1286794800000,11.81625],[1286798400000,11.5884583333],[1286802000000,12.92075],[1286805600000,12.78325],[1286809200000,12.7525416667],[1286812800000,13.0125],[1286816400000,12.491625],[1286820000000,12.666375],[1286823600000,13.0671666667],[1286827200000,12.9203333333],[1286830800000,12.7585833333],[1286834400000,12.70075],[1286838000000,12.5237083333],[1286841600000,12.4571666667],[1286845200000,12.1880833333],[1286848800000,12.3640416667],[1286852400000,12.476125],[1286856000000,12.4612916667],[1286859600000,11.938875],[1286863200000,11.5749166667],[1286866800000,11.3002083333],[1286870400000,11.3517083333],[1286874000000,11.4384166667],[1286877600000,11.4335833333],[1286881200000,11.4507916667],[1286884800000,12.11325],[1286888400000,13.9578333333],[1286892000000,15.153375],[1286895600000,16.617875],[1286899200000,18.243125],[1286902800000,19.0785416667],[1286906400000,19.1639583333],[1286910000000,19.0277083333],[1286913600000,18.8251666667],[1286917200000,19.0352916667],[1286920800000,18.1400833333],[1286924400000,16.8557083333],[1286928000000,15.3191666667],[1286931600000,14.529],[1286935200000,14.2920833333],[1286938800000,13.8494166667],[1286942400000,13.50575],[1286946000000,12.585125],[1286949600000,12.327625],[1286953200000,12.3112916667],[1286956800000,12.3503333333],[1286960400000,12.20275],[1286964000000,12.0722916667],[1286967600000,12.164125],[1286971200000,12.55625],[1286974800000,14.0311666667],[1286978400000,15.697875],[1286982000000,17.62475],[1286985600000,18.7925],[1286989200000,19.0111666667],[1286992800000,18.8875833333],[1286996400000,19.4182916667],[1287000000000,20.0315416667],[1287003600000,19.9552916667],[1287007200000,19.05],[1287010800000,18.019625],[1287014400000,16.196875],[1287018000000,14.4688333333],[1287021600000,14.314875],[1287025200000,13.9841666667],[1287028800000,13.748625],[1287032400000,12.7385],[1287036000000,12.58825],[1287039600000,12.36325],[1287043200000,12.3997916667],[1287046800000,12.345],[1287050400000,12.2266666667],[1287054000000,12.214625],[1287057600000,12.776],[1287061200000,14.6601666667],[1287064800000,16.4029166667],[1287068400000,17.7005],[1287072000000,18.5954583333],[1287075600000,19.1269583333],[1287079200000,18.765875],[1287082800000,19.002625],[1287086400000,18.9308333333],[1287090000000,18.92075],[1287093600000,18.1190416667],[1287097200000,16.980625],[1287100800000,15.4740833333],[1287104400000,14.5332916667],[1287108000000,14.4013333333],[1287111600000,13.9370416667],[1287115200000,13.5967083333],[1287118800000,12.5614583333],[1287122400000,12.6240416667],[1287126000000,12.47525],[1287129600000,12.2728333333],[1287133200000,12.2962916667],[1287136800000,12.4217083333],[1287140400000,12.516125],[1287144000000,12.6506666667],[1287147600000,14.3772083333],[1287151200000,16.0014166667],[1287154800000,17.7475416667],[1287158400000,18.7422916667],[1287162000000,19.0165833333],[1287165600000,19.0423333333],[1287169200000,19.0916666667],[1287172800000,18.8600833333],[1287176400000,18.9618333333],[1287180000000,17.9549166667],[1287183600000,16.4060416667],[1287187200000,15.0535416667],[1287190800000,14.0393333333],[1287194400000,13.8432916667],[1287198000000,13.8481666667],[1287201600000,13.6705],[1287205200000,13.1182916667],[1287208800000,12.405625],[1287212400000,null],[1287216000000,null]]}
            ) ,
          ] ,
          options: SC.Object.create({
            // your options here
            xaxis: {
              mode: "time",
              // timeformat: "%y-%0m-%0d %H:%M"
              timeformat: "%b-%0d %h:%M %p"
            }
          })
        }) // end inner-bottomRightView
        
      }) // end bottomRightView
    
    }) // end MiddleView
  })

});
